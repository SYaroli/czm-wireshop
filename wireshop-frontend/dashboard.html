<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CZM • Wireshop Dashboard</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    /* keep your existing small top nav pill styling (as in your original) */
    .brand-actions .navbtn:hover{ filter:brightness(.92) }
    .brand-actions .navbtn{
      display:inline-block !important;
      background:#1a1c20 !important;
      color:#bbb !important;
      padding:6px 12px !important;
      border-radius:10px !important;
      text-decoration:none !important;
      border:1px solid #3a3f44 !important;
      font-size:13px !important;
      line-height:1 !important;
    }
    .brand-actions .navbtn.active{
      color:#fff !important;
      border-color:#c00000 !important;
      box-shadow:0 0 0 1px rgba(192,0,0,.35) inset !important;
    }
  </style>
</head>

<body>
  <div class="brand-bar">
    <div class="brand-inner">
      <a class="brand-logo" href="dashboard.html">
        <img src="czm-logo.png" alt="CZM">
        <h1 class="brand-title">CZM • Wireshop Dashboard</h1>
      </a>

      <div class="brand-actions" id="navActions">
        <a href="dashboard.html" class="navbtn active">Dashboard</a>
        <a href="assignments.html" class="navbtn">Assignments (Build Next)</a>
        <a href="/inventory" class="navbtn">Inventory</a>
        <a href="admin.html" class="navbtn" id="adminNav">Admin</a>
        <a href="index.html" class="navbtn">Logout</a>
      </div>
    </div>
  </div>

  <main class="page">
    <!-- Welcome strip -->
    <div class="card">
      <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
        <div><strong>Welcome,</strong> <span id="welcomeName"></span></div>
      </div>
    </div>

    <!-- Start Job -->
    <div class="card">
      <h2 style="margin:0 0 10px 0;">Start / Update Job</h2>

      <div class="row" style="gap:10px; flex-wrap:wrap;">
        <label style="min-width:260px;">Part Number<br/>
          <select id="partSelect" class="inline-input"></select>
        </label>

        <label style="min-width:220px;">Action<br/>
          <select id="actionSelect" class="inline-input">
            <option value="Start">Start</option>
            <option value="Continue">Continue</option>
            <option value="Pause">Pause</option>
            <option value="Finish">Finish</option>
          </select>
        </label>

        <label style="flex:1; min-width:260px;">Notes<br/>
          <input id="noteInput" class="inline-input" placeholder="Optional note..." />
        </label>

        <button id="submitJob" class="btn primary">Submit</button>
      </div>

      <div id="jobMsg" style="margin-top:10px; opacity:.85;"></div>
    </div>

    <!-- Current -->
    <div class="card">
      <h2 style="margin:0 0 10px 0;">Current</h2>
      <div id="currentInfo" style="opacity:.9;">--</div>
      <div style="margin-top:8px; opacity:.8;">
        Expected Time: <span id="expectedTime">--</span>
      </div>
    </div>
  </main>

  <script>
    // Gate Admin link + set welcome name (keeps backend as source of truth)
    (function () {
      const user = JSON.parse(localStorage.getItem('user') || '{}');
      const uname = user.username ? String(user.username) : '';
      const role = user.role ? String(user.role).toLowerCase() : 'tech';

      const w = document.getElementById('welcomeName');
      if (w) w.textContent = uname ? `${uname} (${role})` : 'Unknown';

      const adminLink = document.getElementById('adminNav');
      if (adminLink) adminLink.style.display = (role === 'admin') ? '' : 'none';
    })();
  </script>

  <script src="script.js"></script>
</body>
</html>
